{"version":3,"sources":["images/header/logo.svg","images/popup/success.svg","images/popup/failure.svg","utils/routesMap.js","components/Header.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/ImagePopup.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","utils/Api.js","components/AddPlacePopup.js","components/VerificationPopup.js","components/ProtectedRoute.js","components/InfoTooltip.js","components/Entry.js","components/Register.js","components/Login.js","utils/author.js","components/App.js","index.js"],"names":["module","exports","ROUTES_MAP","Header","email","path","exact","className","src","headerLogo","alt","to","onClick","localStorage","setItem","CurrentUserContext","React","createContext","Card","card","onCardLike","onCardDelete","currentUser","useContext","isOwn","owner","_id","isLiked","likes","some","i","cardDeleteButtonClassName","cardLikeButtonClassName","link","name","type","length","Main","props","onEditAvatar","avatar","onEditProfile","about","onAddPlace","cards","map","key","onCardClick","Footer","ImagePopup","onClose","open","isOpen","PopupWithForm","title","noValidate","onSubmit","children","button_text","EditProfilePopup","useState","setName","description","setDescription","useEffect","e","preventDefault","onUpdateUser","target","reset","placeholder","maxLength","minLength","id","value","onChange","required","EditAvatarPopup","avatarRef","useRef","onUpdateAvatar","current","ref","api","serverUrl","authorization","this","_serverUrl","_authorization","url","params","fetch","then","res","ok","json","Promise","reject","status","_fetch","method","headers","info","body","JSON","stringify","cardId","AddPlacePopup","setLink","VerificationPopup","onDeleteCard","ProtectedRoute","Component","component","loggedIn","InfoTooltip","loged","success","failure","Entry","buttonName","text","linkText","setEmail","password","setPassword","Register","onRegister","Login","onLogin","author","token","console","log","App","isEditAvatarPopupOpen","setEditAvatarPopupOpen","isEditProfilePopupOpen","setEditProfilePopupOpen","isAddPlacePopupOpen","setAddPlacePopupOpen","isVerificationPopupOpen","setVerificationPopupOpen","isImagePopupOpen","setImagePopupOpen","selectedCard","setSelectedCard","setCurrentUser","setCards","setLoggedIn","iconPopup","setIconPopup","isInfoTooltipOpen","setInfoTooltipOpen","history","useHistory","jwt","getItem","getToken","data","push","catch","err","getUserInfo","userInfo","getInitialCards","handleEsc","closeAllPopups","overlayClose","classList","contains","setEventListeners","document","addEventListener","removeEventListener","Provider","login","register","changeLikeCardStatus","newCard","newCards","c","setUserInfo","finally","setUserAvatar","createCard","deleteCard","filter","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.69770e29.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.0fce8a33.svg\";","module.exports = __webpack_public_path__ + \"static/media/success.e38b395c.svg\";","module.exports = __webpack_public_path__ + \"static/media/failure.4072126c.svg\";","export const ROUTES_MAP ={\n    MAIN: '/',\n    SIGN_UP: '/sign-up',\n    SIGN_IN: '/sign-in',\n    NOT_FOUND: '/404'\n};","import React from 'react';\nimport { Link, Route, Switch } from 'react-router-dom';\nimport headerLogo from '../images/header/logo.svg';\nimport { ROUTES_MAP } from '../utils/routesMap';\nfunction Header({email}) {\n  const exit = () => {\n    localStorage.setItem('jwt', '');\n  }\n  return <Switch>\n    <Route path='/404' exact/>\n    <Route path='*'>\n      <header className='header'>\n        <img className='header__logo' src={headerLogo} alt='Место Россия' />\n      <Switch>\n        <Route path='/sign-up'>\n          <Link className='header__button' to={ROUTES_MAP.SIGN_IN}>Войти</Link>\n        </Route>\n        <Route path='/sign-in'>\n          <Link className='header__button' to={ROUTES_MAP.SIGN_UP}>Регистрация</Link>\n        </Route>\n        <Route path='/' exact>\n          <div className='header__user'>\n          <p className='header__email'>{email}</p>\n          <Link className='header__button' to={ROUTES_MAP.SIGN_IN} onClick={exit}>Выйти</Link>\n          </div>\n        </Route>\n      </Switch>\n      </header>\n    </Route>\n  </Switch>\n}\nexport default Header;\n","import React from \"react\";\r\n\r\nexport const CurrentUserContext = React.createContext();\r\n","import React from \"react\";\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\n\r\nfunction Card({ card, onClick, onCardLike, onCardDelete }) {\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n  const isOwn = card.owner._id === currentUser._id;\r\n  const isLiked = card.likes.some((i) => i._id === currentUser._id);\r\n  const cardDeleteButtonClassName = `card__btn-delete ${\r\n    isOwn ? \"\" : \"card__btn-delete_invis\"\r\n  }`;\r\n  const cardLikeButtonClassName = `card__btn-like ${\r\n    isLiked ? \"card__btn-like_active\" : \"\"\r\n  }`;\r\n  function handleClick() {\r\n    onClick(card);\r\n  }\r\n  function handleLikeClick() {\r\n    onCardLike(card);\r\n  }\r\n  function handleDelete() {\r\n    onCardDelete(card);\r\n  }\r\n  return (\r\n    <li className=\"card\">\r\n      <img\r\n        className=\"card__image\"\r\n        src={card.link}\r\n        alt={card.name}\r\n        onClick={handleClick}\r\n      />\r\n      <button\r\n        type=\"button\"\r\n        className={cardDeleteButtonClassName}\r\n        onClick={handleDelete}\r\n      />\r\n      <div className=\"card__text\">\r\n        <p className=\"card__title\">{card.name}</p>\r\n        <div className=\"card__like\">\r\n          <button\r\n            type=\"button\"\r\n            className={cardLikeButtonClassName}\r\n            onClick={handleLikeClick}\r\n          />\r\n          <p className=\"card__number-likes\">{card.likes.length}</p>\r\n        </div>\r\n      </div>\r\n    </li>\r\n  );\r\n}\r\nexport default Card;\r\n","import React, { useContext } from \"react\";\r\nimport Card from \"./Card\";\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\n\r\nfunction Main(props) {\r\n  const currentUser = useContext(CurrentUserContext);\r\n\r\n  return (\r\n    <>\r\n      <main className=\"content\">\r\n        <section className=\"profile\">\r\n          <button\r\n            className=\"profile__btn profile__btn_avatar\"\r\n            onClick={props.onEditAvatar}\r\n          >\r\n            <img\r\n              className=\"profile__avatar\"\r\n              src={currentUser.avatar}\r\n              alt=\"Аватар пользователя\"\r\n            />\r\n          </button>\r\n          <div className=\"profile__info\">\r\n            <h1 className=\"profile__name\">{currentUser.name}</h1>\r\n            <button\r\n              type=\"button\"\r\n              className=\"profile__btn profile__btn_edit\"\r\n              onClick={props.onEditProfile}\r\n            ></button>\r\n            <p className=\"profile__job\">{currentUser.about}</p>\r\n          </div>\r\n          <button\r\n            type=\"button\"\r\n            className=\"profile__btn profile__btn_add\"\r\n            onClick={props.onAddPlace}\r\n          ></button>\r\n        </section>\r\n        <section className=\"place\">\r\n          <ul className=\"place__list\">\r\n            {props.cards.map((card) => (\r\n              <Card\r\n                card={card}\r\n                key={card._id}\r\n                onClick={props.onCardClick}\r\n                onCardLike={props.onCardLike}\r\n                onCardDelete={props.onCardDelete}\r\n              />\r\n            ))}\r\n          </ul>\r\n        </section>\r\n      </main>\r\n    </>\r\n  );\r\n}\r\nexport default Main;\r\n","import React from \"react\";\nimport { Route, Switch } from 'react-router-dom';\nfunction Footer() {\n  return <Switch>\n    <Route path='/404' exact/>\n    <Route path='*'>\n      <footer className=\"footer\">\n        <p className=\"footer__text\">&copy; 2020 Mesto Russia</p>\n      </footer>\n    </Route>\n  </Switch>\n}\nexport default Footer;\n","import React from \"react\";\r\n\r\nfunction ImagePopup({ card, onClose, isOpen }) {\r\n  const open = isOpen && \"popup_opened\";\r\n  function handleClickClose() {\r\n    onClose();\r\n  }\r\n  return (\r\n    <div className={`popup popup_type_photo ${open}`}>\r\n      <div className=\"popup__container_photo\">\r\n        <img\r\n          className=\"popup__picture\"\r\n          src={card ? card.link : \"#\"}\r\n          alt={card ? card.name : \"\"}\r\n        />\r\n        <h3 className=\"popup__caption\">{card ? card.name : \"\"}</h3>\r\n        <button\r\n          type=\"button\"\r\n          className=\"popup__close\"\r\n          onClick={handleClickClose}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\nexport default ImagePopup;\r\n","import React from \"react\";\r\n\r\nfunction PopupWithForm(props) {\r\n  return (\r\n    <div\r\n      className={`popup popup_type_${props.name} ${\r\n        props.isOpen ? \"popup_opened\" : \"\"\r\n      }`}\r\n    >\r\n      <div className={`popup__container popup__container_${props.name}`}>\r\n        <h3 className=\"popup__title\">{props.title}</h3>\r\n        <form\r\n          className=\"popup__form\"\r\n          name={props.name}\r\n          noValidate\r\n          onSubmit={props.onSubmit}\r\n        >\r\n          {props.children}\r\n          <button type=\"submit\" className=\"popup__button\">\r\n            {props.button_text}\r\n          </button>\r\n        </form>\r\n        <button\r\n          type=\"button\"\r\n          className=\"popup__close\"\r\n          onClick={props.onClose}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PopupWithForm;\r\n","import React, { useState, useContext, useEffect } from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\n\r\nfunction EditProfilePopup(props) {\r\n  const currentUser = useContext(CurrentUserContext);\r\n  const [name, setName] = useState(\"\");\r\n  const [description, setDescription] = useState(\"\");\r\n  useEffect(() => {\r\n    setName(currentUser.name);\r\n    setDescription(currentUser.about);\r\n  }, [currentUser]);\r\n\r\n  const handleNameChange = (e) => {\r\n    setName(e.target.value);\r\n  };\r\n  const handleDescriptionChange = (e) => {\r\n    setDescription(e.target.value);\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    props.onUpdateUser({\r\n      name: name,\r\n      about: description,\r\n    });\r\n    e.target.reset();\r\n  };\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name=\"profile\"\r\n      title=\"Редактировать профиль\"\r\n      button_text=\"Сохранить\"\r\n      onClose={props.onClose}\r\n      isOpen={props.isOpen}\r\n      onSubmit={handleSubmit}\r\n    >\r\n      <label className=\"popup__field\">\r\n        <input\r\n          name=\"name\"\r\n          type=\"text\"\r\n          placeholder=\"Имя\"\r\n          className=\"popup__input popup__input_name\"\r\n          maxLength=\"40\"\r\n          minLength=\"2\"\r\n          id=\"name\"\r\n          value={name || \"\"}\r\n          onChange={handleNameChange}\r\n          required\r\n        />\r\n        <span className=\"popup__error\" id=\"name-error\" />\r\n      </label>\r\n      <label className=\"popup__field\">\r\n        <input\r\n          name=\"job\"\r\n          type=\"text\"\r\n          placeholder=\"О себе\"\r\n          className=\"popup__input popup__input_job\"\r\n          maxLength=\"200\"\r\n          minLength=\"2\"\r\n          id=\"job\"\r\n          value={description || \"\"}\r\n          onChange={handleDescriptionChange}\r\n          required\r\n        />\r\n\r\n        <span className=\"popup__error\" id=\"job-error\" />\r\n      </label>\r\n    </PopupWithForm>\r\n  );\r\n}\r\nexport default EditProfilePopup;\r\n","import React, { useRef } from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\n\r\nfunction EditAvatarPopup(props) {\r\n  const avatarRef = useRef();\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    props.onUpdateAvatar(avatarRef.current.value);\r\n    e.target.reset();\r\n  };\r\n  return (\r\n    <PopupWithForm\r\n      name=\"avatar\"\r\n      title=\"Обновить аватар\"\r\n      button_text=\"Сохранить\"\r\n      isOpen={props.isOpen}\r\n      onClose={props.onClose}\r\n      onSubmit={handleSubmit}\r\n    >\r\n      <label className=\"popup__field\">\r\n        <input\r\n          name=\"avatar\"\r\n          type=\"url\"\r\n          placeholder=\"Ссылка на новый аватар\"\r\n          className=\"popup__input\"\r\n          id=\"avatar\"\r\n          required\r\n          ref={avatarRef}\r\n        />\r\n        <span className=\"popup__error\" id=\"avatar-error\" />\r\n      </label>\r\n    </PopupWithForm>\r\n  );\r\n}\r\nexport default EditAvatarPopup;\r\n","class Api {\r\n  constructor({ serverUrl, authorization }) {\r\n    this._serverUrl = serverUrl;\r\n    this._authorization = authorization;\r\n  }\r\n\r\n  _fetch(url, params) {\r\n    return fetch(this._serverUrl + url, params).then((res) => {\r\n      if (res.ok) {\r\n        return res.json();\r\n      }\r\n      return Promise.reject(`Ошибка: ${res.status}`);\r\n    });\r\n  }\r\n  getUserInfo() {\r\n    return this._fetch(\"/users/me\", {\r\n      method: \"GET\",\r\n      headers: {\r\n        authorization: this._authorization,\r\n      },\r\n    });\r\n  }\r\n  //редактирование информации профиля\r\n  setUserInfo(info) {\r\n    return this._fetch(\"/users/me\", {\r\n      method: \"PATCH\",\r\n      headers: {\r\n        authorization: this._authorization,\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({\r\n        name: info.name,\r\n        about: info.about,\r\n      }),\r\n    });\r\n  }\r\n  //редактирование информации профиля\r\n  setUserAvatar(info) {\r\n    return this._fetch(\"/users/me/avatar\", {\r\n      method: \"PATCH\",\r\n      headers: {\r\n        authorization: this._authorization,\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({\r\n        avatar: info,\r\n      }),\r\n    });\r\n  }\r\n  //добавление карточки\r\n  getInitialCards() {\r\n    return this._fetch(\"/cards\", {\r\n      method: \"GET\",\r\n      headers: {\r\n        authorization: this._authorization,\r\n      },\r\n    });\r\n  }\r\n  createCard(info) {\r\n    return this._fetch(\"/cards\", {\r\n      method: \"POST\",\r\n      headers: {\r\n        authorization: this._authorization,\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({\r\n        name: info.name,\r\n        link: info.link,\r\n      }),\r\n    });\r\n  }\r\n  //удаление карточки\r\n  deleteCard(cardId) {\r\n    return this._fetch(`/cards/${cardId}`, {\r\n      method: \"DELETE\",\r\n      headers: {\r\n        authorization: this._authorization,\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    });\r\n  }\r\n  //  Реализация лайка\r\n  createLike(cardId) {\r\n    return this._fetch(`/cards/likes/${cardId}`, {\r\n      method: \"PUT\",\r\n      headers: {\r\n        authorization: this._authorization,\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    });\r\n  }\r\n  deleteLike(cardId) {\r\n    return this._fetch(`/cards/likes/${cardId}`, {\r\n      method: \"DELETE\",\r\n      headers: {\r\n        authorization: this._authorization,\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    });\r\n  }\r\n  changeLikeCardStatus(cardId, isLiked) {\r\n    return this._fetch(`/cards/likes/${cardId}`, {\r\n      method: isLiked ? \"PUT\" : \"DELETE\",\r\n      headers: {\r\n        authorization: this._authorization,\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    });\r\n  }\r\n}\r\nconst api = new Api({\r\n  serverUrl: \"http://localhost:3000\",\r\n  authorization: \"7a3dfd49-072e-4055-86f4-4cec12a9c522\",\r\n});\r\nexport default api;\r\n","import React, { useState } from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\n\r\nfunction AddPlacePopup(props) {\r\n  const [name, setName] = useState(\"\");\r\n  const [link, setLink] = useState(\"\");\r\n\r\n  const handleNameChange = (e) => {\r\n    setName(e.target.value);\r\n  };\r\n  const handleLinkChange = (e) => {\r\n    setLink(e.target.value);\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    props.onAddPlace({\r\n      name: name,\r\n      link: link,\r\n    });\r\n  };\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name=\"add-card\"\r\n      title=\"Новое место\"\r\n      button_text=\"Создать\"\r\n      onClose={props.onClose}\r\n      isOpen={props.isOpen}\r\n      onSubmit={handleSubmit}\r\n    >\r\n      <label className=\"popup__field\">\r\n        <input\r\n          name=\"name\"\r\n          type=\"text\"\r\n          placeholder=\"Название\"\r\n          className=\"popup__input popup__input_mesto\"\r\n          maxLength=\"30\"\r\n          minLength=\"1\"\r\n          id=\"mesto\"\r\n          required\r\n          value={name}\r\n          onChange={handleNameChange}\r\n        />\r\n        <span className=\"popup__error\" id=\"mesto-error\" />\r\n      </label>\r\n      <label className=\"popup__field\">\r\n        <input\r\n          name=\"src\"\r\n          type=\"url\"\r\n          placeholder=\"Ссылка на картинку\"\r\n          className=\"popup__input popup__input_src\"\r\n          id=\"src\"\r\n          required\r\n          value={link}\r\n          onChange={handleLinkChange}\r\n        />\r\n        <span className=\"popup__error\" id=\"src-error\" />\r\n      </label>\r\n    </PopupWithForm>\r\n  );\r\n}\r\nexport default AddPlacePopup;\r\n","import React from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\n\r\nfunction VerificationPopup({ card, isOpen, onClose, onDeleteCard }) {\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    onDeleteCard(card);\r\n  };\r\n  return (\r\n    <PopupWithForm\r\n      name=\"verification\"\r\n      title=\"Вы уверены?\"\r\n      button_text=\"ДА\"\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n    ></PopupWithForm>\r\n  );\r\n}\r\nexport default VerificationPopup;\r\n","import React from 'react';\nimport { Route, Redirect } from 'react-router-dom';\n\nconst ProtectedRoute = ({ component: Component, ...props }) => (\n  <Route>\n    {\n      () => (props.loggedIn ? <Component {...props} /> : <Redirect to='/sign-up' />)\n    }\n  </Route>\n);\n\nexport default ProtectedRoute;\n","import React from 'react';\nimport success from '../images/popup/success.svg';\nimport failure from '../images/popup/failure.svg';\n\nfunction InfoTooltip({isOpen, onClose, loged}) {\n  const open = isOpen && \"popup_opened\";\n  const handleClickClose = () => {\n    onClose();\n  }\n  return (\n    <div\n      className={`popup popup_type_info ${open}`}\n    >\n      <div className={`popup__container popup__container_info`}>\n        <img className='popup__image' src={loged ? success : failure} alt='Ответ от сервера'/>\n        <h3 className=\"popup__title popup__title_login\">{loged? 'Вы успешно зарегистрировались!' : 'Что-то пошло не так! Попробуйте ещё раз.'}</h3>\n        <button\n          type=\"button\"\n          className=\"popup__close\"\n          onClick={handleClickClose}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default InfoTooltip;","import React, { useState} from 'react';\nimport { Link } from 'react-router-dom';\n\nfunction Entry ({title, link, buttonName, text, linkText, onSubmit}){\nconst [email, setEmail] = useState('');\nconst [password, setPassword] = useState('');\nconst handleEmailChange = (e) => {\n    setEmail(e.target.value);\n};\n\nconst handlePasswordChange = (e) => {\n    setPassword(e.target.value);\n};\nconst submitForm = () => {\n    onSubmit(password, email);\n}\nreturn (\n    <form\n          className='entry'\n          noValidate\n        >\n        <h2 className='entry__title'>{title}</h2>\n          <label className=\"entry__field\">\n        <input\n          name=\"email\"\n          type='email'\n          placeholder=\"Email\"\n          className=\"entry__input entry__input_email\"\n          maxLength=\"40\"\n          minLength=\"2\"\n          id=\"email\"\n          value={email}\n          onChange={handleEmailChange}\n          required\n        />\n        <span className=\"entry__error\" id=\"email-error\" />\n      </label> \n      <label className=\"entry__field\">\n        <input\n          name=\"password\"\n          type=\"password\"\n          placeholder=\"Пароль\"\n          className=\"entry__input entry__input_name\"\n          maxLength=\"40\"\n          minLength=\"2\"\n          id=\"password\"\n          value={password}\n          onChange={handlePasswordChange}\n          required\n        />\n        <span className=\"entry__error\" id=\"password-error\" />\n      </label>\n        <button type='button' className='entry__button' onClick={submitForm}>{buttonName}</button> \n        <p className='entry__text'>{text}<Link className='link' to={link}>{linkText}</Link></p>\n        </form>);\n}\nexport default Entry;","import React from 'react';\nimport Entry from './Entry';\nimport {ROUTES_MAP} from '../utils/routesMap';\n\nfunction Register({onRegister}) {\n  const submitForm = (password, email) => {\n    onRegister(password, email);\n  }\n\nreturn(\n  <Entry\n    title = 'Регистрация'\n    buttonName= 'Зарегистрироваться'\n    text='Уже зарегистрированы? '\n    link = {ROUTES_MAP.SIGN_IN}\n    linkText = 'Войти'\n    onSubmit = {submitForm}\n  />);\n};\n\nexport default Register;","import React from 'react';\nimport Entry from './Entry';\nimport {ROUTES_MAP} from '../utils/routesMap';\n\nfunction Login ({onLogin}) {\n    const submitForm = (password, email) => {\n    onLogin(password, email);\n  }\n    return(<Entry\n        title = 'Вход'\n        buttonName= 'Войти'\n        text='Ещё не зарегистрированы? '\n        link = {ROUTES_MAP.SIGN_UP}\n        linkText = 'Зарегистрироваться'\n        onSubmit = {submitForm}\n    />);\n    };\nexport default Login;","class Author {\n  constructor({ serverUrl }) {\n    this._serverUrl = serverUrl;\n  }\n\n  _fetch(url, params) {\n    return fetch(this._serverUrl + url, params).then((res) => {\n      if (res.ok) {\n        return res.json();\n      }\n      return Promise.reject(res.status);\n    });\n  }\n  getToken(token) {\n    console.log(token);\n    return this._fetch(\"/users/me\", {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"Authorization\" : `Bearer ${token}`,\n        },\n    });\n  }\n  login (password, email) {\n    return this._fetch(\"/signin\", {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({ password, email }),\n    });  \n  }\n  register (password, email) { \n    return this._fetch(\"/signup\", {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({ password, email }),\n    });\n  }\n}\nconst author = new Author({\n  serverUrl: 'http://localhost:3000'\n});\nexport default author;\n","import React, { useState, useEffect } from \"react\";\nimport {useHistory, Switch, Route, Redirect} from 'react-router-dom';\nimport Header from \"./Header\";\nimport Main from \"./Main\";\nimport Footer from \"./Footer\";\nimport ImagePopup from \"./ImagePopup\";\nimport EditProfilePopup from \"./EditProfilePopup\";\nimport EditAvatarPopup from \"./EditAvatarPopup\";\nimport api from \"../utils/Api\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\nimport AddPlacePopup from \"./AddPlacePopup\";\nimport VerificationPopup from \"./VerificationPopup\";\nimport ProtectedRoute from './ProtectedRoute';\nimport InfoTooltip from './InfoTooltip';\nimport Register from './Register';\nimport Login from './Login';\nimport { ROUTES_MAP } from '../utils/routesMap';\nimport author from '../utils/author';\nimport NotFound from './NotFound';\n\nfunction App() {\n  const [isEditAvatarPopupOpen, setEditAvatarPopupOpen] = useState(false);\n  const [isEditProfilePopupOpen, setEditProfilePopupOpen] = useState(false);\n  const [isAddPlacePopupOpen, setAddPlacePopupOpen] = useState(false);\n  const [isVerificationPopupOpen, setVerificationPopupOpen] = useState(false);\n  const [isImagePopupOpen, setImagePopupOpen] = useState(false);\n  const [selectedCard, setSelectedCard] = useState(null);\n  const [currentUser, setCurrentUser] = useState(\"\");\n  const [cards, setCards] = useState([]);\n\n  const [loggedIn, setLoggedIn] = useState(false);\n  const [iconPopup, setIconPopup] = useState(true);\n  const [email, setEmail] = useState('');\n  const [isInfoTooltipOpen, setInfoTooltipOpen] = React.useState(false);\n  const history = useHistory();\n\n  useEffect(()=>{\n    \n    const jwt = localStorage.getItem('jwt');\n    if (jwt) {\n      author.getToken(jwt)\n        .then((res) => {\n          setLoggedIn(true);\n          setEmail(res.data.email);\n          history.push('/');\n        })\n        .catch((err) => {\n          \n          if(err === 401){\n            console.log(\"Переданный токен некорректен\");\n          } else {\n            console.log(`Ошибка: ${err}`);\n          }\n        });\n    }\n},[history])\n  useEffect(() => {\n    if(loggedIn){\n    api\n      .getUserInfo()\n      .then((userInfo) => {\n        setCurrentUser(userInfo);\n      })\n      .catch((err) => {\n        console.log(`Данные о пользователе не получены. ${err}`);\n      });}\n  }, [loggedIn]);\n  const handleCardLike = (card) => {\n    const isLiked = card.likes.some((i) => i._id === currentUser._id);\n    api\n      .changeLikeCardStatus(card._id, !isLiked)\n      .then((newCard) => {\n        const newCards = cards.map((c) => (c._id === card._id ? newCard : c));\n        setCards(newCards);\n      })\n      .catch((err) => {\n        console.log(`Ошибка инициализации лайка. ${err}`);\n      });\n  }\n  const handleCardDelete = (card) => {\n    api\n      .deleteCard(card._id)\n      .then(() => {\n        const newCards = cards.filter((c) => c._id !== card._id);\n        setCards(newCards);\n        closeAllPopups();\n      })\n      .catch((err) => {\n        console.log(`Удаление карточки не выполнено. ${err}`);\n      });\n  }\n  const handleAddPlaceSubmit = (card) => {\n    api\n      .createCard(card)\n      .then((res) => {\n        const newCard = res;\n        setCards([newCard, ...cards]);\n        closeAllPopups();\n      })\n      .catch((err) => {\n        console.log(`Ошибка добавления карточки. ${err}`);\n      })\n      .finally(() => {});\n  }\n  useEffect(() => {\n    if(loggedIn){\n    api\n      .getInitialCards()\n      .then((card) => {\n        setCards(card);\n      })\n      .catch((err) => {\n        console.log(`Данные карточек не получены. ${err}`);\n      });}\n  }, [loggedIn]);\n\n  const handleUpdateUser = (info) => {\n    api\n      .setUserInfo(info)\n      .then((res) => {\n        setCurrentUser(res);\n        closeAllPopups();\n      })\n      .catch((err) => {\n        console.log(`Ошибка обновления данных пользователя. ${err}`);\n      })\n      .finally(() => {});\n  }\n  const handleUpdateAvatar = (avatar) => {\n    api\n      .setUserAvatar(avatar)\n      .then((res) => {\n        setCurrentUser(res);\n        closeAllPopups();\n      })\n      .catch((err) => {\n        console.log(`Ошибка обновления аватара. ${err}`);\n      })\n      .finally(() => {});\n  }\n  const handleEsc = (e) => {\n    if (e.key === \"Escape\") {\n      closeAllPopups();\n    }\n  }\n  const overlayClose = (e) => {\n    if (e.target.classList.contains(\"popup\")) {\n      closeAllPopups();\n    }\n  }\n  const setEventListeners = () => {\n    document.addEventListener(\"keydown\", handleEsc);\n    document.addEventListener(\"click\", overlayClose);\n  }\n  const handleEditAvatarClick = () => {\n    setEditAvatarPopupOpen(true);\n    setEventListeners();\n  }\n  const handleDeleteCardClick = (card) => {\n    setVerificationPopupOpen(true);\n    setSelectedCard(card);\n    setEventListeners();\n  }\n  const handleEditProfileClick = () => {\n    setEditProfilePopupOpen(true);\n    setEventListeners();\n  }\n  const handleAddPlaceClick = () => {\n    setAddPlacePopupOpen(true);\n    setEventListeners();\n  }\n  const handleCardClick = (card) => {\n    setImagePopupOpen(true);\n    setSelectedCard(card);\n    setEventListeners();\n  }\n  const closeAllPopups = () => {\n    setEditAvatarPopupOpen(false);\n    setEditProfilePopupOpen(false);\n    setAddPlacePopupOpen(false);\n    setVerificationPopupOpen(false);\n    setImagePopupOpen(false);\n    setInfoTooltipOpen(false);\n    // setSelectedCard(null);\n    document.removeEventListener(\"keydown\", handleEsc);\n    document.removeEventListener(\"click\", overlayClose);\n  }\n\n  const handleLogin =( password, email ) =>{\n    author.login(password, email).then((res)=>{\n      localStorage.setItem('jwt', res.token); \n      author.getToken(res.token).then((res)=>{\n      setEmail(res.data.email);\n      setLoggedIn(true);\n      history.push('/');\n    })\n    .catch((err)=>{\n      if(err === 401){\n        console.log(\"Переданный токен некорректен\");\n      } else {\n        console.log(`Ошибка: ${err}`);\n      }\n      setIconPopup(false);\n      setInfoTooltipOpen(true);\n      setEventListeners();\n    });\n  }).catch((err)=>{\n    if (err === 400) {\n      return console.log(\"Не передано одно из полей\");\n    } \n    if (err === 401){\n      return console.log(\"Пользователь с email не найден\");\n    } else {\n      return console.log(`Ошибка: ${err}`);\n    }\n  })\n};\n  const handleRegister =(password, email) =>{\n    author.register(password, email)\n      .then(()=>{\n        setIconPopup(true);\n        setInfoTooltipOpen(true);\n        setEventListeners();\n      history.push('/sign-in');\n      })\n      .catch((err)=>{\n        if (err === 400) {\n          setIconPopup(false);\n          setInfoTooltipOpen(true);\n          setEventListeners();\n          return console.log(\"Некорректно заполнено одно из полей\");\n        } else {  //если статус ошибки не 400\n          setIconPopup(false);\n          setInfoTooltipOpen(true);\n          setEventListeners();\n          return console.log(`Ошибка: ${err}`);\n        }\n    });\n  }\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <div className=\"page\">\n        <Header \n          email={email}\n          login={loggedIn}\n        />\n        <Switch>\n          <Route path={ROUTES_MAP.SIGN_UP}>\n            <Register onRegister={handleRegister}/>\n          </Route>\n          <Route path={ROUTES_MAP.SIGN_IN}>\n            <Login onLogin={handleLogin}/>\n          </Route>\n          <ProtectedRoute exact path={ROUTES_MAP.MAIN}\n              loggedIn={loggedIn}\n              component={Main}\n              cards={cards}\n              onCardLike={handleCardLike}\n              onCardDelete={handleDeleteCardClick}\n              onEditAvatar={handleEditAvatarClick}\n              onEditProfile={handleEditProfileClick}\n              onAddPlace={handleAddPlaceClick}\n              onCardClick={handleCardClick}\n            />\n          {/* <Route exact path={ROUTES_MAP.NOT_FOUND}>\n            <NotFound login={loggedIn} />\n          </Route> */}\n          <Route path='*'>{loggedIn ? \n            <Redirect to={ROUTES_MAP.MAIN} /> :\n            <Redirect to={ROUTES_MAP.SIGN_IN} />\n          }\n          </Route>\n        </Switch>\n        <Footer />\n\n        <EditProfilePopup\n          isOpen={isEditProfilePopupOpen}\n          onClose={closeAllPopups}\n          onUpdateUser={handleUpdateUser}\n        />\n        <EditAvatarPopup\n          isOpen={isEditAvatarPopupOpen}\n          onClose={closeAllPopups}\n          onUpdateAvatar={handleUpdateAvatar}\n        />\n        <AddPlacePopup\n          isOpen={isAddPlacePopupOpen}\n          onClose={closeAllPopups}\n          onAddPlace={handleAddPlaceSubmit}\n        />\n        <ImagePopup\n          isOpen={isImagePopupOpen}\n          card={selectedCard}\n          onClose={closeAllPopups}\n        />\n        <VerificationPopup\n          isOpen={isVerificationPopupOpen}\n          onClose={closeAllPopups}\n          onDeleteCard={handleCardDelete}\n          card={selectedCard}\n        />\n        <InfoTooltip \n          isOpen={isInfoTooltipOpen}\n          onClose={closeAllPopups}\n          loged={iconPopup}\n        />\n      </div>\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./pages/index.css\";\r\nimport App from \"./components/App\";\r\nimport { BrowserRouter } from 'react-router-dom';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <BrowserRouter>\r\n      <App />\r\n    </BrowserRouter>\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}