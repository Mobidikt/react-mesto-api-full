{"version":3,"sources":["images/header/logo.svg","images/popup/success.svg","images/popup/failure.svg","utils/routesMap.js","components/Header.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/ImagePopup.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","utils/Api.js","components/AddPlacePopup.js","components/VerificationPopup.js","components/ProtectedRoute.js","components/InfoTooltip.js","components/Entry.js","components/Register.js","components/Login.js","utils/author.js","components/App.js","index.js"],"names":["module","exports","ROUTES_MAP","Header","props","path","exact","className","src","headerLogo","alt","to","email","onClick","exit","localStorage","setItem","CurrentUserContext","React","createContext","Card","card","onCardLike","onCardDelete","currentUser","useContext","console","log","isOwn","owner","_id","isLiked","likes","find","id","cardDeleteButtonClassName","cardLikeButtonClassName","link","name","type","length","Main","onEditAvatar","avatar","onEditProfile","about","onAddPlace","cards","map","key","onCardClick","Footer","ImagePopup","onClose","open","isOpen","PopupWithForm","title","noValidate","onSubmit","children","button_text","EditProfilePopup","useState","setName","description","setDescription","useEffect","e","preventDefault","onUpdateUser","target","reset","placeholder","maxLength","minLength","value","onChange","required","EditAvatarPopup","avatarRef","useRef","onUpdateAvatar","current","ref","api","serverUrl","this","_serverUrl","url","params","fetch","then","res","ok","json","Promise","reject","status","jwt","_fetch","method","headers","authorization","info","body","JSON","stringify","cardId","AddPlacePopup","setLink","VerificationPopup","onDeleteCard","ProtectedRoute","Component","component","loggedIn","InfoTooltip","loged","success","failure","Entry","buttonName","text","linkText","setEmail","password","setPassword","Register","onRegister","Login","onLogin","author","token","App","isEditAvatarPopupOpen","setEditAvatarPopupOpen","isEditProfilePopupOpen","setEditProfilePopupOpen","isAddPlacePopupOpen","setAddPlacePopupOpen","isVerificationPopupOpen","setVerificationPopupOpen","isImagePopupOpen","setImagePopupOpen","selectedCard","setSelectedCard","setCurrentUser","setCards","setLoggedIn","iconPopup","setIconPopup","isInfoTooltipOpen","setInfoTooltipOpen","history","useHistory","getItem","getToken","push","catch","err","getUserInfo","userInfo","getInitialCards","handleEsc","closeAllPopups","overlayClose","classList","contains","setEventListeners","document","addEventListener","removeEventListener","Provider","login","register","some","changeLikeCardStatus","newCard","newCards","c","data","setUserInfo","finally","setUserAvatar","createCard","deleteCard","filter","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.91d76875.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.0fce8a33.svg\";","module.exports = __webpack_public_path__ + \"static/media/success.e38b395c.svg\";","module.exports = __webpack_public_path__ + \"static/media/failure.4072126c.svg\";","export const ROUTES_MAP ={\n    MAIN: '/',\n    SIGN_UP: '/sign-up',\n    SIGN_IN: '/sign-in',\n    NOT_FOUND: '/404'\n};","import React from 'react';\nimport { Link, Route, Switch } from 'react-router-dom';\nimport headerLogo from '../images/header/logo.svg';\nimport { ROUTES_MAP } from '../utils/routesMap';\nfunction Header(props) {\n  const exit = () => {\n    props.exit();\n    localStorage.setItem('jwt', '');\n  }\n  return <Switch>\n    <Route path='/404' exact/>\n    <Route path='*'>\n      <header className='header'>\n        <img className='header__logo' src={headerLogo} alt='Место Россия' />\n      <Switch>\n        <Route path='/sign-up'>\n          <Link className='header__button' to={ROUTES_MAP.SIGN_IN}>Войти</Link>\n        </Route>\n        <Route path='/sign-in'>\n          <Link className='header__button' to={ROUTES_MAP.SIGN_UP}>Регистрация</Link>\n        </Route>\n        <Route path='/' exact>\n          <div className='header__user'>\n          <p className='header__email'>{props.email}</p>\n          <Link className='header__button' to={ROUTES_MAP.SIGN_IN} onClick={exit}>Выйти</Link>\n          </div>\n        </Route>\n      </Switch>\n      </header>\n    </Route>\n  </Switch>\n}\nexport default Header;\n","import React from \"react\";\r\n\r\nexport const CurrentUserContext = React.createContext();\r\n","import React from \"react\";\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\n\r\nfunction Card({ card, onClick, onCardLike, onCardDelete }) {\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n  console.log(\"card\", card)\r\n  const isOwn = card.owner === currentUser._id;\r\n  const isLiked = card.likes.find((id) => id === currentUser._id);\r\n  const cardDeleteButtonClassName = `card__btn-delete ${\r\n    isOwn ? \"\" : \"card__btn-delete_invis\"\r\n  }`;\r\n  const cardLikeButtonClassName = `card__btn-like ${\r\n    isLiked ? \"card__btn-like_active\" : \"\"\r\n  }`;\r\n  function handleClick() {\r\n    onClick(card);\r\n  }\r\n  function handleLikeClick() {\r\n    onCardLike(card);\r\n  }\r\n  function handleDelete() {\r\n    onCardDelete(card);\r\n  }\r\n  return (\r\n    <li className=\"card\">\r\n      <img\r\n        className=\"card__image\"\r\n        src={card.link}\r\n        alt={card.name}\r\n        onClick={handleClick}\r\n      />\r\n      <button\r\n        type=\"button\"\r\n        className={cardDeleteButtonClassName}\r\n        onClick={handleDelete}\r\n      />\r\n      <div className=\"card__text\">\r\n        <p className=\"card__title\">{card.name}</p>\r\n        <div className=\"card__like\">\r\n          <button\r\n            type=\"button\"\r\n            className={cardLikeButtonClassName}\r\n            onClick={handleLikeClick}\r\n          />\r\n          <p className=\"card__number-likes\">{card.likes.length}</p>\r\n        </div>\r\n      </div>\r\n    </li>\r\n  );\r\n}\r\nexport default Card;\r\n","import React, { useContext } from \"react\";\r\nimport Card from \"./Card\";\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\n\r\nfunction Main(props) {\r\n  const currentUser = useContext(CurrentUserContext);\r\n\r\n  return (\r\n    <>\r\n      <main className=\"content\">\r\n        <section className=\"profile\">\r\n          <button\r\n            className=\"profile__btn profile__btn_avatar\"\r\n            onClick={props.onEditAvatar}\r\n          >\r\n            <img\r\n              className=\"profile__avatar\"\r\n              src={currentUser.avatar}\r\n              alt=\"Аватар пользователя\"\r\n            />\r\n          </button>\r\n          <div className=\"profile__info\">\r\n            <h1 className=\"profile__name\">{currentUser.name}</h1>\r\n            <button\r\n              type=\"button\"\r\n              className=\"profile__btn profile__btn_edit\"\r\n              onClick={props.onEditProfile}\r\n            ></button>\r\n            <p className=\"profile__job\">{currentUser.about}</p>\r\n          </div>\r\n          <button\r\n            type=\"button\"\r\n            className=\"profile__btn profile__btn_add\"\r\n            onClick={props.onAddPlace}\r\n          ></button>\r\n        </section>\r\n        <section className=\"place\">\r\n          <ul className=\"place__list\">\r\n            {props.cards.map((card) => (\r\n              <Card\r\n                card={card}\r\n                key={card._id}\r\n                onClick={props.onCardClick}\r\n                onCardLike={props.onCardLike}\r\n                onCardDelete={props.onCardDelete}\r\n              />\r\n            ))}\r\n          </ul>\r\n        </section>\r\n      </main>\r\n    </>\r\n  );\r\n}\r\nexport default Main;\r\n","import React from \"react\";\nimport { Route, Switch } from 'react-router-dom';\nfunction Footer() {\n  return <Switch>\n    <Route path='/404' exact/>\n    <Route path='*'>\n      <footer className=\"footer\">\n        <p className=\"footer__text\">&copy; 2020 Mesto Russia</p>\n      </footer>\n    </Route>\n  </Switch>\n}\nexport default Footer;\n","import React from \"react\";\r\n\r\nfunction ImagePopup({ card, onClose, isOpen }) {\r\n  const open = isOpen && \"popup_opened\";\r\n  function handleClickClose() {\r\n    onClose();\r\n  }\r\n  return (\r\n    <div className={`popup popup_type_photo ${open}`}>\r\n      <div className=\"popup__container_photo\">\r\n        <img\r\n          className=\"popup__picture\"\r\n          src={card ? card.link : \"#\"}\r\n          alt={card ? card.name : \"\"}\r\n        />\r\n        <h3 className=\"popup__caption\">{card ? card.name : \"\"}</h3>\r\n        <button\r\n          type=\"button\"\r\n          className=\"popup__close\"\r\n          onClick={handleClickClose}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\nexport default ImagePopup;\r\n","import React from \"react\";\r\n\r\nfunction PopupWithForm(props) {\r\n  return (\r\n    <div\r\n      className={`popup popup_type_${props.name} ${\r\n        props.isOpen ? \"popup_opened\" : \"\"\r\n      }`}\r\n    >\r\n      <div className={`popup__container popup__container_${props.name}`}>\r\n        <h3 className=\"popup__title\">{props.title}</h3>\r\n        <form\r\n          className=\"popup__form\"\r\n          name={props.name}\r\n          noValidate\r\n          onSubmit={props.onSubmit}\r\n        >\r\n          {props.children}\r\n          <button type=\"submit\" className=\"popup__button\">\r\n            {props.button_text}\r\n          </button>\r\n        </form>\r\n        <button\r\n          type=\"button\"\r\n          className=\"popup__close\"\r\n          onClick={props.onClose}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PopupWithForm;\r\n","import React, { useState, useContext, useEffect } from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\n\r\nfunction EditProfilePopup(props) {\r\n  const currentUser = useContext(CurrentUserContext);\r\n  const [name, setName] = useState(\"\");\r\n  const [description, setDescription] = useState(\"\");\r\n  useEffect(() => {\r\n    setName(currentUser.name);\r\n    setDescription(currentUser.about);\r\n  }, [currentUser]);\r\n\r\n  const handleNameChange = (e) => {\r\n    setName(e.target.value);\r\n  };\r\n  const handleDescriptionChange = (e) => {\r\n    setDescription(e.target.value);\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    props.onUpdateUser({\r\n      name: name,\r\n      about: description,\r\n    });\r\n    e.target.reset();\r\n  };\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name=\"profile\"\r\n      title=\"Редактировать профиль\"\r\n      button_text=\"Сохранить\"\r\n      onClose={props.onClose}\r\n      isOpen={props.isOpen}\r\n      onSubmit={handleSubmit}\r\n    >\r\n      <label className=\"popup__field\">\r\n        <input\r\n          name=\"name\"\r\n          type=\"text\"\r\n          placeholder=\"Имя\"\r\n          className=\"popup__input popup__input_name\"\r\n          maxLength=\"40\"\r\n          minLength=\"2\"\r\n          id=\"name\"\r\n          value={name || \"\"}\r\n          onChange={handleNameChange}\r\n          required\r\n        />\r\n        <span className=\"popup__error\" id=\"name-error\" />\r\n      </label>\r\n      <label className=\"popup__field\">\r\n        <input\r\n          name=\"job\"\r\n          type=\"text\"\r\n          placeholder=\"О себе\"\r\n          className=\"popup__input popup__input_job\"\r\n          maxLength=\"200\"\r\n          minLength=\"2\"\r\n          id=\"job\"\r\n          value={description || \"\"}\r\n          onChange={handleDescriptionChange}\r\n          required\r\n        />\r\n\r\n        <span className=\"popup__error\" id=\"job-error\" />\r\n      </label>\r\n    </PopupWithForm>\r\n  );\r\n}\r\nexport default EditProfilePopup;\r\n","import React, { useRef } from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\n\r\nfunction EditAvatarPopup(props) {\r\n  const avatarRef = useRef();\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    props.onUpdateAvatar(avatarRef.current.value);\r\n    e.target.reset();\r\n  };\r\n  return (\r\n    <PopupWithForm\r\n      name=\"avatar\"\r\n      title=\"Обновить аватар\"\r\n      button_text=\"Сохранить\"\r\n      isOpen={props.isOpen}\r\n      onClose={props.onClose}\r\n      onSubmit={handleSubmit}\r\n    >\r\n      <label className=\"popup__field\">\r\n        <input\r\n          name=\"avatar\"\r\n          type=\"url\"\r\n          placeholder=\"Ссылка на новый аватар\"\r\n          className=\"popup__input\"\r\n          id=\"avatar\"\r\n          required\r\n          ref={avatarRef}\r\n        />\r\n        <span className=\"popup__error\" id=\"avatar-error\" />\r\n      </label>\r\n    </PopupWithForm>\r\n  );\r\n}\r\nexport default EditAvatarPopup;\r\n","class Api {\r\n  \r\n  constructor({ serverUrl }) {\r\n    this._serverUrl = serverUrl;\r\n  }\r\n\r\n  _fetch(url, params) {\r\n    return fetch(this._serverUrl + url, params).then((res) => {\r\n      if (res.ok) {\r\n        return res.json();\r\n      }\r\n      return Promise.reject(`Ошибка: ${res.status}`);\r\n    });\r\n  }\r\n  getUserInfo(jwt) {\r\n    return this._fetch(\"/users/me\", {\r\n      method: \"GET\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        authorization: `Bearer ${jwt}`,\r\n      },\r\n    });\r\n  }\r\n  //редактирование информации профиля\r\n  setUserInfo(info, jwt) {\r\n    return this._fetch(\"/users/me\", {\r\n      method: \"PATCH\",\r\n      headers: {\r\n        authorization: `Bearer ${jwt}`,\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({\r\n        name: info.name,\r\n        about: info.about,\r\n      }),\r\n    });\r\n  }\r\n  //редактирование информации профиля\r\n  setUserAvatar(info, jwt) {\r\n    return this._fetch(\"/users/me/avatar\", {\r\n      method: \"PATCH\",\r\n      headers: {\r\n        authorization:`Bearer ${jwt}`,\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({\r\n        avatar: info,\r\n      }),\r\n    });\r\n  }\r\n  //добавление карточки\r\n  getInitialCards(jwt) {\r\n    return this._fetch(\"/cards\", {\r\n      method: \"GET\",\r\n      headers: {\r\n        authorization: `Bearer ${jwt}`,\r\n      },\r\n    });\r\n  }\r\n  createCard(info, jwt) {\r\n    return this._fetch(\"/cards\", {\r\n      method: \"POST\",\r\n      headers: {\r\n        authorization: `Bearer ${jwt}`,\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({\r\n        name: info.name,\r\n        link: info.link,\r\n      }),\r\n    });\r\n  }\r\n  //удаление карточки\r\n  deleteCard(cardId, jwt) {\r\n    return this._fetch(`/cards/${cardId}`, {\r\n      method: \"DELETE\",\r\n      headers: {\r\n        authorization: `Bearer ${jwt}`,\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    });\r\n  }\r\n  //  Реализация лайка\r\n  createLike(cardId, jwt) {\r\n    return this._fetch(`/cards/likes/${cardId}`, {\r\n      method: \"PUT\",\r\n      headers: {\r\n        authorization: `Bearer ${jwt}`,\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    });\r\n  }\r\n  deleteLike(cardId, jwt) {\r\n    return this._fetch(`/cards/likes/${cardId}`, {\r\n      method: \"DELETE\",\r\n      headers: {\r\n        authorization: `Bearer ${jwt}`,\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    });\r\n  }\r\n  changeLikeCardStatus(cardId, isLiked, jwt) {\r\n    return this._fetch(`/cards/likes/${cardId}`, {\r\n      method: isLiked ? \"PUT\" : \"DELETE\",\r\n      headers: {\r\n        authorization: `Bearer ${jwt}`,\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    });\r\n  }\r\n}\r\n\r\nconst api = new Api({\r\n  serverUrl: \"http://localhost:3000\",\r\n});\r\nexport default api;\r\n","import React, { useState } from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\n\r\nfunction AddPlacePopup(props) {\r\n  const [name, setName] = useState(\"\");\r\n  const [link, setLink] = useState(\"\");\r\n\r\n  const handleNameChange = (e) => {\r\n    setName(e.target.value);\r\n  };\r\n  const handleLinkChange = (e) => {\r\n    setLink(e.target.value);\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    props.onAddPlace({\r\n      name: name,\r\n      link: link,\r\n    });\r\n  };\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name=\"add-card\"\r\n      title=\"Новое место\"\r\n      button_text=\"Создать\"\r\n      onClose={props.onClose}\r\n      isOpen={props.isOpen}\r\n      onSubmit={handleSubmit}\r\n    >\r\n      <label className=\"popup__field\">\r\n        <input\r\n          name=\"name\"\r\n          type=\"text\"\r\n          placeholder=\"Название\"\r\n          className=\"popup__input popup__input_mesto\"\r\n          maxLength=\"30\"\r\n          minLength=\"1\"\r\n          id=\"mesto\"\r\n          required\r\n          value={name}\r\n          onChange={handleNameChange}\r\n        />\r\n        <span className=\"popup__error\" id=\"mesto-error\" />\r\n      </label>\r\n      <label className=\"popup__field\">\r\n        <input\r\n          name=\"src\"\r\n          type=\"url\"\r\n          placeholder=\"Ссылка на картинку\"\r\n          className=\"popup__input popup__input_src\"\r\n          id=\"src\"\r\n          required\r\n          value={link}\r\n          onChange={handleLinkChange}\r\n        />\r\n        <span className=\"popup__error\" id=\"src-error\" />\r\n      </label>\r\n    </PopupWithForm>\r\n  );\r\n}\r\nexport default AddPlacePopup;\r\n","import React from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\n\r\nfunction VerificationPopup({ card, isOpen, onClose, onDeleteCard }) {\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    onDeleteCard(card);\r\n  };\r\n  return (\r\n    <PopupWithForm\r\n      name=\"verification\"\r\n      title=\"Вы уверены?\"\r\n      button_text=\"ДА\"\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n    ></PopupWithForm>\r\n  );\r\n}\r\nexport default VerificationPopup;\r\n","import React from 'react';\nimport { Route, Redirect } from 'react-router-dom';\n\nconst ProtectedRoute = ({ component: Component, ...props }) => (\n  <Route>\n    {\n      () => (props.loggedIn ? <Component {...props} /> : <Redirect to='/sign-up' />)\n    }\n  </Route>\n);\n\nexport default ProtectedRoute;\n","import React from 'react';\nimport success from '../images/popup/success.svg';\nimport failure from '../images/popup/failure.svg';\n\nfunction InfoTooltip({isOpen, onClose, loged}) {\n  const open = isOpen && \"popup_opened\";\n  const handleClickClose = () => {\n    onClose();\n  }\n  return (\n    <div\n      className={`popup popup_type_info ${open}`}\n    >\n      <div className={`popup__container popup__container_info`}>\n        <img className='popup__image' src={loged ? success : failure} alt='Ответ от сервера'/>\n        <h3 className=\"popup__title popup__title_login\">{loged? 'Вы успешно зарегистрировались!' : 'Что-то пошло не так! Попробуйте ещё раз.'}</h3>\n        <button\n          type=\"button\"\n          className=\"popup__close\"\n          onClick={handleClickClose}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default InfoTooltip;","import React, { useState} from 'react';\nimport { Link } from 'react-router-dom';\n\nfunction Entry ({title, link, buttonName, text, linkText, onSubmit}){\nconst [email, setEmail] = useState('');\nconst [password, setPassword] = useState('');\nconst handleEmailChange = (e) => {\n    setEmail(e.target.value);\n};\n\nconst handlePasswordChange = (e) => {\n    setPassword(e.target.value);\n};\nconst submitForm = () => {\n    onSubmit(password, email);\n}\nreturn (\n    <form\n          className='entry'\n          noValidate\n        >\n        <h2 className='entry__title'>{title}</h2>\n          <label className=\"entry__field\">\n        <input\n          name=\"email\"\n          type='email'\n          placeholder=\"Email\"\n          className=\"entry__input entry__input_email\"\n          maxLength=\"40\"\n          minLength=\"2\"\n          id=\"email\"\n          value={email}\n          onChange={handleEmailChange}\n          required\n        />\n        <span className=\"entry__error\" id=\"email-error\" />\n      </label> \n      <label className=\"entry__field\">\n        <input\n          name=\"password\"\n          type=\"password\"\n          placeholder=\"Пароль\"\n          className=\"entry__input entry__input_name\"\n          maxLength=\"40\"\n          minLength=\"2\"\n          id=\"password\"\n          value={password}\n          onChange={handlePasswordChange}\n          required\n        />\n        <span className=\"entry__error\" id=\"password-error\" />\n      </label>\n        <button type='button' className='entry__button' onClick={submitForm}>{buttonName}</button> \n        <p className='entry__text'>{text}<Link className='link' to={link}>{linkText}</Link></p>\n        </form>);\n}\nexport default Entry;","import React from 'react';\nimport Entry from './Entry';\nimport {ROUTES_MAP} from '../utils/routesMap';\n\nfunction Register({onRegister}) {\n  const submitForm = (password, email) => {\n    onRegister(password, email);\n  }\n\nreturn(\n  <Entry\n    title = 'Регистрация'\n    buttonName= 'Зарегистрироваться'\n    text='Уже зарегистрированы? '\n    link = {ROUTES_MAP.SIGN_IN}\n    linkText = 'Войти'\n    onSubmit = {submitForm}\n  />);\n};\n\nexport default Register;","import React from 'react';\nimport Entry from './Entry';\nimport {ROUTES_MAP} from '../utils/routesMap';\n\nfunction Login ({onLogin}) {\n    const submitForm = (password, email) => {\n    onLogin(password, email);\n  }\n    return(<Entry\n        title = 'Вход'\n        buttonName= 'Войти'\n        text='Ещё не зарегистрированы? '\n        link = {ROUTES_MAP.SIGN_UP}\n        linkText = 'Зарегистрироваться'\n        onSubmit = {submitForm}\n    />);\n    };\nexport default Login;","class Author {\n  constructor({ serverUrl }) {\n    this._serverUrl = serverUrl;\n  }\n\n  _fetch(url, params) {\n    return fetch(this._serverUrl + url, params).then((res) => {\n      if (res.ok) {\n        return res.json();\n      }\n      return Promise.reject(res.status);\n    });\n  }\n  getToken(token) {\n    return this._fetch(\"/users/me\", {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"Authorization\" : `Bearer ${token}`,\n        },\n    });\n  }\n  login (password, email) {\n    return this._fetch(\"/signin\", {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({ password, email }),\n    });  \n  }\n  register (password, email) { \n    return this._fetch(\"/signup\", {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({ password, email }),\n    });\n  }\n}\nconst author = new Author({\n  serverUrl: 'http://localhost:3000'\n});\nexport default author;\n","import React, { useState, useEffect } from \"react\";\nimport {useHistory, Switch, Route, Redirect} from 'react-router-dom';\nimport Header from \"./Header\";\nimport Main from \"./Main\";\nimport Footer from \"./Footer\";\nimport ImagePopup from \"./ImagePopup\";\nimport EditProfilePopup from \"./EditProfilePopup\";\nimport EditAvatarPopup from \"./EditAvatarPopup\";\nimport api from \"../utils/Api\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\nimport AddPlacePopup from \"./AddPlacePopup\";\nimport VerificationPopup from \"./VerificationPopup\";\nimport ProtectedRoute from './ProtectedRoute';\nimport InfoTooltip from './InfoTooltip';\nimport Register from './Register';\nimport Login from './Login';\nimport { ROUTES_MAP } from '../utils/routesMap';\nimport author from '../utils/author';\nimport NotFound from './NotFound';\n\nfunction App() {\n  const [isEditAvatarPopupOpen, setEditAvatarPopupOpen] = useState(false);\n  const [isEditProfilePopupOpen, setEditProfilePopupOpen] = useState(false);\n  const [isAddPlacePopupOpen, setAddPlacePopupOpen] = useState(false);\n  const [isVerificationPopupOpen, setVerificationPopupOpen] = useState(false);\n  const [isImagePopupOpen, setImagePopupOpen] = useState(false);\n  const [selectedCard, setSelectedCard] = useState(null);\n  const [currentUser, setCurrentUser] = useState(\"\");\n  const [cards, setCards] = useState([]);\n\n  const [loggedIn, setLoggedIn] = useState(false);\n  const [iconPopup, setIconPopup] = useState(true);\n  const [email, setEmail] = useState('');\n  const [isInfoTooltipOpen, setInfoTooltipOpen] = React.useState(false);\n  const history = useHistory();\n\n  useEffect(()=>{   \n    const jwt = localStorage.getItem('jwt');\n    if (jwt) {\n      author.getToken(jwt)\n        .then((res) => {\n          setCurrentUser(res);\n          setLoggedIn(true);\n          setEmail(res.email);\n          history.push('/');\n        })\n        .catch((err) => {\n          \n          if(err === 401){\n            console.log(\"Переданный токен некорректен\");\n          } else {\n            console.log(`Ошибка: ${err}`);\n          }\n        });\n    }\n},[loggedIn, history])\n  useEffect(() => {\n    if(loggedIn){\n      const jwt = localStorage.getItem('jwt');\n    api\n      .getUserInfo(jwt)\n      .then((userInfo) => {\n        \n        setCurrentUser(userInfo);\n        console.log(\"setCurrentUser\", currentUser)\n      })\n      .catch((err) => {\n        console.log(`Данные о пользователе не получены. ${err}`);\n      });}\n  }, [loggedIn]);\n  const handleCardLike = (card) => {\n    const jwt = localStorage.getItem('jwt');\n    const isLiked = card.likes.some((id) => id === currentUser._id);\n    api\n      .changeLikeCardStatus(card._id, !isLiked, jwt)\n      .then((newCard) => {\n        console.log(\"newCard\", newCard)\n        const newCards = cards.map((c) => (c._id === card._id ? newCard.data : c));\n        setCards(newCards);\n      })\n      .catch((err) => {\n        console.log(`Ошибка инициализации лайка. ${err}`);\n      });\n  }\n  const handleCardDelete = (card) => {\n    const jwt = localStorage.getItem('jwt');\n    api\n      .deleteCard(card._id, jwt)\n      .then(() => {\n        const newCards = cards.filter((c) => c._id !== card._id);\n        setCards(newCards);\n        closeAllPopups();\n      })\n      .catch((err) => {\n        console.log(`Удаление карточки не выполнено. ${err}`);\n      });\n  }\n  const handleAddPlaceSubmit = (card) => {\n    const jwt = localStorage.getItem('jwt');\n    api\n      .createCard(card, jwt)\n      .then((res) => {\n        const newCard = res;\n        setCards([newCard, ...cards]);\n        closeAllPopups();\n      })\n      .catch((err) => {\n        console.log(`Ошибка добавления карточки. ${err}`);\n      })\n      .finally(() => {});\n  }\n  useEffect(() => {\n    if(loggedIn){\n      const jwt = localStorage.getItem('jwt');\n    api\n      .getInitialCards(jwt)\n      .then((card) => {\n        setCards(card);\n      })\n      .catch((err) => {\n        console.log(`Данные карточек не получены. ${err}`);\n      });}\n  }, [loggedIn]);\n\n  const handleUpdateUser = (info) => {\n    const jwt = localStorage.getItem('jwt');\n    api\n      .setUserInfo(info, jwt)\n      .then((res) => {\n        setCurrentUser(res);\n        closeAllPopups();\n      })\n      .catch((err) => {\n        console.log(`Ошибка обновления данных пользователя. ${err}`);\n      })\n      .finally(() => {});\n  }\n  const handleUpdateAvatar = (avatar) => {\n    const jwt = localStorage.getItem('jwt');\n    api\n      .setUserAvatar(avatar, jwt)\n      .then((res) => {\n        setCurrentUser(res);\n        closeAllPopups();\n      })\n      .catch((err) => {\n        console.log(`Ошибка обновления аватара. ${err}`);\n      })\n      .finally(() => {});\n  }\n  const handleEsc = (e) => {\n    if (e.key === \"Escape\") {\n      closeAllPopups();\n    }\n  }\n  const overlayClose = (e) => {\n    if (e.target.classList.contains(\"popup\")) {\n      closeAllPopups();\n    }\n  }\n  const setEventListeners = () => {\n    document.addEventListener(\"keydown\", handleEsc);\n    document.addEventListener(\"click\", overlayClose);\n  }\n  const handleEditAvatarClick = () => {\n    setEditAvatarPopupOpen(true);\n    setEventListeners();\n  }\n  const handleDeleteCardClick = (card) => {\n    setVerificationPopupOpen(true);\n    setSelectedCard(card);\n    setEventListeners();\n  }\n  const handleEditProfileClick = () => {\n    setEditProfilePopupOpen(true);\n    setEventListeners();\n  }\n  const handleAddPlaceClick = () => {\n    setAddPlacePopupOpen(true);\n    setEventListeners();\n  }\n  const handleCardClick = (card) => {\n    setImagePopupOpen(true);\n    setSelectedCard(card);\n    setEventListeners();\n  }\n  const closeAllPopups = () => {\n    setEditAvatarPopupOpen(false);\n    setEditProfilePopupOpen(false);\n    setAddPlacePopupOpen(false);\n    setVerificationPopupOpen(false);\n    setImagePopupOpen(false);\n    setInfoTooltipOpen(false);\n    // setSelectedCard(null);\n    document.removeEventListener(\"keydown\", handleEsc);\n    document.removeEventListener(\"click\", overlayClose);\n  }\n  const exit = () => {\n    setLoggedIn(false);\n  }\n\n  const handleLogin =( password, email ) =>{\n    author.login(password, email).then((res)=>{\n      localStorage.setItem('jwt', res.token); \n      author.getToken(res.token).then((res)=>{\n      setLoggedIn(true);\n      setEmail(res.email);\n      history.push('/');\n    })\n    .catch((err)=>{\n      if(err === 401){\n        console.log(\"Переданный токен некорректен\");\n      } else {\n        console.log(`Ошибка: ${err}`);\n      }\n      setIconPopup(false);\n      setInfoTooltipOpen(true);\n      setEventListeners();\n    });\n  }).catch((err)=>{\n    if (err === 400) {\n      return console.log(\"Не передано одно из полей\");\n    } \n    if (err === 401){\n      return console.log(\"Пользователь с email не найден\");\n    } else {\n      return console.log(`Ошибка: ${err}`);\n    }\n  })\n};\n  const handleRegister =(password, email) =>{\n    author.register(password, email)\n      .then(()=>{\n        setIconPopup(true);\n        setInfoTooltipOpen(true);\n        setEventListeners();\n      history.push('/sign-in');\n      })\n      .catch((err)=>{\n        if (err === 400) {\n          setIconPopup(false);\n          setInfoTooltipOpen(true);\n          setEventListeners();\n          return console.log(\"Некорректно заполнено одно из полей\");\n        } else {  //если статус ошибки не 400\n          setIconPopup(false);\n          setInfoTooltipOpen(true);\n          setEventListeners();\n          return console.log(`Ошибка: ${err}`);\n        }\n    });\n  }\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <div className=\"page\">\n        <Header \n          email={email}\n          login={loggedIn}\n          exit={exit}\n        />\n        <Switch>\n          <Route path={ROUTES_MAP.SIGN_UP}>\n            <Register onRegister={handleRegister}/>\n          </Route>\n          <Route path={ROUTES_MAP.SIGN_IN}>\n            <Login onLogin={handleLogin}/>\n          </Route>\n          <ProtectedRoute exact path={ROUTES_MAP.MAIN}\n              loggedIn={loggedIn}\n              component={Main}\n              cards={cards}\n              onCardLike={handleCardLike}\n              onCardDelete={handleDeleteCardClick}\n              onEditAvatar={handleEditAvatarClick}\n              onEditProfile={handleEditProfileClick}\n              onAddPlace={handleAddPlaceClick}\n              onCardClick={handleCardClick}\n            />\n          {/* <Route exact path={ROUTES_MAP.NOT_FOUND}>\n            <NotFound login={loggedIn} />\n          </Route> */}\n          <Route path='*'>{loggedIn ? \n            <Redirect to={ROUTES_MAP.MAIN} /> :\n            <Redirect to={ROUTES_MAP.SIGN_IN} />\n          }\n          </Route>\n        </Switch>\n        <Footer />\n\n        <EditProfilePopup\n          isOpen={isEditProfilePopupOpen}\n          onClose={closeAllPopups}\n          onUpdateUser={handleUpdateUser}\n        />\n        <EditAvatarPopup\n          isOpen={isEditAvatarPopupOpen}\n          onClose={closeAllPopups}\n          onUpdateAvatar={handleUpdateAvatar}\n        />\n        <AddPlacePopup\n          isOpen={isAddPlacePopupOpen}\n          onClose={closeAllPopups}\n          onAddPlace={handleAddPlaceSubmit}\n        />\n        <ImagePopup\n          isOpen={isImagePopupOpen}\n          card={selectedCard}\n          onClose={closeAllPopups}\n        />\n        <VerificationPopup\n          isOpen={isVerificationPopupOpen}\n          onClose={closeAllPopups}\n          onDeleteCard={handleCardDelete}\n          card={selectedCard}\n        />\n        <InfoTooltip \n          isOpen={isInfoTooltipOpen}\n          onClose={closeAllPopups}\n          loged={iconPopup}\n        />\n      </div>\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./pages/index.css\";\r\nimport App from \"./components/App\";\r\nimport { BrowserRouter } from 'react-router-dom';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <BrowserRouter>\r\n      <App />\r\n    </BrowserRouter>\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}